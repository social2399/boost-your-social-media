<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Submit Complaint | Boost Your Social Media</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body class="dashboard-bg">

<!-- HEADER -->
<header class="dash-header">
  <div class="dash-logo">Boost Your Social Media</div>
  <div class="dash-user">
    <span>Hello, User</span>
    <a href="dashboard.html">Back</a>
  </div>
</header>

<!-- MAIN -->
<div class="center-wrapper">

  <div class="auth-card">
    <h2>Submit Complaint</h2>

    <p class="info-text">
      Use this form only if the other user did not follow back within
      <strong>48 hours</strong>.
    </p>

    <!-- FORM -->
    <form id="complaintForm">

      <div class="form-group">
        <label>Reported User</label>
        <input type="text" value="User B" disabled>
      </div>

      <div class="form-group">
        <label>Reason</label>
        <textarea required>User did not follow back within 48 hours.</textarea>
      </div>

      <!-- hidden backend values -->
      <input type="hidden" name="reported_user_id" value="2">
      <input type="hidden" name="support_request_id" value="1">

      <button type="submit" class="primary-btn">
        Submit Complaint
      </button>

    </form>

    <p class="small-note">
      âš  False complaints may result in account suspension.
    </p>

  </div>

</div>

<!-- SCRIPT -->
<script>
  document.getElementById("complaintForm").addEventListener("submit", async function(e){
    e.preventDefault();

    let fd = new FormData(this);

    let res = await fetch("api/complaints/create.php", {
      method: "POST",
      body: fd
    });

    let result = await res.text();
    alert(result);

    if(result === "submitted"){
      window.location.href = "dashboard.html";
    }
  });
</script>

</body>
</html>
